// --- V4.6.4 續跑與里程相容邏輯 ---
    if(isRunning) {
        if(isAuto) {
            stopAndSave(); 
        } else {
            document.getElementById('statusTop').innerText = "● 續跑中";
            document.getElementById('statusTop').style.color = "#3498db"; // 變更顏色區分
            
            while(isRunning) {
                // 自動抓取當下設定的舒緩 BPM
                let bpm = parseInt(document.getElementById('bpm4').value) || 180;
                let bInt = 60000/bpm;
                
                document.getElementById('phaseDetail').innerText = `續跑 BPM ${bpm} | 無限模式`;
                
                // 關鍵：這裡依然使用 currentBeepMode，所以每公里切換功能依然有效！
                let freq = (currentBeepMode === 'A') ? 950 : 1400;
                
                // 續跑音效稍微縮短一點點(0.06s)，增加「輕快感」區分
                playBeep(freq, 0.7, 0.06); 
                
                await new Promise(r => setTimeout(r, bInt));
            }
        }
    }
